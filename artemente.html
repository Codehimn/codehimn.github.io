<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rifa sencilla</title>
  <style>
    :root{--bg:#f7f9fb;--card:#fff;--accent:#0b63d6;--muted:#6b7280}
    html,body{height:100%}
    body{font-family:Inter, system-ui, Arial, sans-serif; background:var(--bg); margin:0; display:flex; align-items:center; justify-content:center; padding:40px}
    .wrap{width:100%;max-width:760px}
    .card{background:var(--card); border-radius:12px; padding:20px; box-shadow:0 6px 20px rgba(11,99,214,0.06);}
    h1{margin:0 0 6px;font-size:1.5rem}
    p.small{color:var(--muted);margin:0 0 14px}
    label{display:block;margin-top:10px;font-weight:600}
    textarea,input[type=text]{width:100%;padding:10px;border:1px solid #e6e9ef;border-radius:8px;margin-top:6px;font-size:0.95rem}
    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:var(--accent);color:#fff;border:none;padding:9px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    button.ghost{background:#e6eefc;color:var(--accent);border:1px solid #d3e7ff}
    #listArea{margin-top:12px;min-height:44px;color:#111}
    ul{padding-left:18px;margin:6px 0}
    .winner{margin-top:14px;padding:12px;border-radius:8px;background:linear-gradient(90deg,#fff8e1,#fffdf6);border:1px solid #ffe7a8}
    .small-muted{font-size:0.9rem;color:var(--muted)}
    footer{margin-top:12px;text-align:right;font-size:0.85rem;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Rifa sencilla</h1>
      <p class="small">Añade participantes (uno por línea) o añade nombres de uno en uno. Pulsa <strong>Sorteo</strong> para elegir un ganador al azar.</p>

      <label for="bulk">Participantes (uno por línea)</label>
      <textarea id="bulk" rows="5" placeholder="Ej: Juan Pérez\nMaría López\nAna García"></textarea>
      <div class="controls">
        <button id="addBulk">Añadir todos</button>
        <button id="clearBulk" class="ghost">Borrar texto</button>
      </div>

      <label for="name">Añadir nombre individual</label>
      <input id="name" type="text" placeholder="Nombre del participante" />
      <div class="controls">
        <button id="addOne">Añadir</button>
        <button id="removeLast" class="ghost">Quitar último</button>
      </div>

      <h3 style="margin-top:16px">Lista de participantes</h3>
      <div id="listArea" class="small-muted"><em>No hay participantes aún.</em></div>

      <div style="margin-top:14px" class="controls">
        <button id="draw">Sorteo</button>
        <button id="reset" class="ghost">Reiniciar</button>
      </div>

      <div id="result"></div>
      <footer><span class="small-muted">Hecho con ❤️ — boceto simple</span></footer>
    </div>
  </div>

  <script>
    // Datos y utilidades
    const participants = [];
    const listArea = document.getElementById('listArea');
    const result = document.getElementById('result');

    function escapeHtml(s){
      return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
    }

    function renderList(){
      if (participants.length === 0){
        listArea.innerHTML = '<em>No hay participantes aún.</em>';
        return;
      }
      const items = participants.map((p,i) => `<li>${i+1}. ${escapeHtml(p)}</li>`).join('');
      listArea.innerHTML = `<ul>${items}</ul>`;
    }

    // Eventos
    document.getElementById('addBulk').addEventListener('click', () => {
      const text = document.getElementById('bulk').value.trim();
      if (!text) return;
      const lines = text.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
      participants.push(...lines);
      document.getElementById('bulk').value = '';
      renderList();
    });

    document.getElementById('clearBulk').addEventListener('click', () => {
      document.getElementById('bulk').value = '';
    });

    document.getElementById('addOne').addEventListener('click', () => {
      const input = document.getElementById('name');
      const name = input.value.trim();
      if (!name) return;
      participants.push(name);
      input.value = '';
      renderList();
    });

    document.getElementById('removeLast').addEventListener('click', () => {
      if (participants.length === 0) return;
      participants.pop();
      renderList();
    });

    document.getElementById('draw').addEventListener('click', () => {
      result.innerHTML = '';
      if (participants.length === 0){
        result.innerHTML = '<div class="winner">No hay participantes.</div>';
        return;
      }
      // Elegir ganador aleatorio
      const idx = Math.floor(Math.random() * participants.length);
      const winner = participants[idx];
      result.innerHTML = `<div class="winner"><strong>¡Ganador!</strong> ${escapeHtml(winner)}<div class="small-muted">Número ${idx+1} de ${participants.length}</div></div>`;
    });

    document.getElementById('reset').addEventListener('click', () => {
      if (!confirm('¿Borrar todos los participantes y resultado?')) return;
      participants.length = 0;
      renderList();
      result.innerHTML = '';
    });

    // Render inicial
    renderList();
  </script>
</body>
</html>